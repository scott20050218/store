<!--pages/user-manage/user-manage.wxml-->
<navigation-bar title="管理用户" back="{{true}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="add-bar">
      <button class="add-btn" bindtap="onAddTap">新增用户</button>
    </view>

    <!-- 新增/编辑表单 -->
    <view class="form-card" wx:if="{{showForm}}">
      <view class="form-title">{{editingId ? '编辑用户' : '新增用户'}}</view>
      <view class="form-item">
        <text class="form-label">姓名</text>
        <input class="form-input" placeholder="请输入姓名" value="{{formName}}" bindinput="onFormNameInput" />
      </view>
      <view class="form-item">
        <text class="form-label">手机号</text>
        <input class="form-input" type="number" maxlength="11" placeholder="请输入11位手机号" value="{{formPhone}}" bindinput="onFormPhoneInput" />
      </view>
      <view class="form-item">
        <text class="form-label">状态</text>
        <picker mode="selector" range="{{statusList}}" range-key="label" value="{{statusIndex}}" bindchange="onStatusChange">
          <view class="form-picker">{{statusList[statusIndex].label}}</view>
        </picker>
      </view>
      <view class="form-actions">
        <button class="form-btn cancel" bindtap="onFormCancel">取消</button>
        <button class="form-btn submit" bindtap="onFormSubmit">保存</button>
      </view>
    </view>

    <!-- 用户列表 -->
    <view class="user-list" wx:if="{{list.length > 0}}">
      <view class="user-row" wx:for="{{list}}" wx:key="id">
        <view class="user-info">
          <text class="user-name">{{item.name || '未设置'}}</text>
          <text class="user-phone">{{item.phone}}</text>
          <text class="user-status status-{{item.statusClass}}">{{item.status}}</text>
        </view>
        <view class="user-action" bindtap="onEditTap" data-item="{{item}}">编辑</view>
      </view>
    </view>
    <view class="empty-state" wx:if="{{!loading && list.length === 0}}">
      <text class="empty-text">暂无用户，点击上方新增</text>
    </view>
  </view>
</scroll-view>
