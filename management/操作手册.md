# 仓库管理系统 - 小程序操作手册

版本：v1.0.10

---

## 目录

1. [首次使用](#首次使用)
2. [首页功能](#首页功能)
3. [入库操作](#入库操作)
4. [出库操作](#出库操作)
5. [物品总览](#物品总览)
6. [统计功能](#统计功能)
7. [我的页面](#我的页面)
8. [管理用户](#管理用户-仅管理员)
9. [常见问题](#常见问题)

---

## 首次使用

### 1. 登录/注册

1. **打开小程序**，进入登录页面
2. **输入手机号**：输入您的11位手机号码
3. **输入密码**：输入您的登录密码（passcode）
4. **点击登录**：
   - 如果账号已注册，直接登录成功
   - 如果账号未注册，系统会提示注册，输入密码后完成注册并登录

> **注意**：首次注册需要您的手机号已在系统中预初始化，且状态为"正常"。如无法注册，请联系管理员。

### 2. 登录后界面

登录成功后，您将看到底部有三个标签页：
- **首页**：主要功能入口
- **统计**：查看出入库统计
- **我的**：个人信息和设置

---

## 首页功能

首页提供三个主要功能入口：

### 📋 物品总览
- 查看所有库存物品
- 显示物品到期情况
- 查看物品照片（如有）

### 📦 入库
- 添加新物品到仓库
- 记录物品详细信息

### 📤 出库
- 从仓库取出物品
- 按 FIFO（先进先出）原则出库

---

## 入库操作

### 操作步骤

1. **进入入库页面**
   - 在首页点击「入库」按钮

2. **填写入库信息**

   **必填项：**
   - **物品类型**：从下拉列表选择，或选择「自定义」后手动输入
   - **单位**：选择单位（如：袋、瓶、箱、斤、个），或选择「自定义」后手动输入
   - **数量**：输入正整数（仅支持数字）
   - **到期日期**：选择到期日期（必填）
   - **标签颜色**：选择一个标签颜色用于分类
   
   **选填项：**
   - **生产日期**：可选择填写
   - **位置**：选择物品存放位置（如：1号架、2号架等）
   - **照片**：可拍照或从相册选择物品照片

3. **到期提醒设置**
   - 选择在到期前多少天提醒（如：3天、7天）
   - 系统会在物品临近到期时显示「即将过期」标记

4. **提交入库**
   - 点击页面底部的「提交入库」按钮
   - 如有照片，系统会先上传照片（显示「上传中...」）
   - 上传成功后自动提交入库信息
   - 如上传失败，可选择「不带图片入库」继续提交，或「取消」返回修改

5. **入库成功**
   - 显示「入库成功」提示
   - 自动返回首页

### 注意事项

- 入库时间自动设置为当前时间，不可手动修改
- 数量必须为正整数
- 到期日期不能早于生产日期（如填写了生产日期）
- 照片上传可能需要一些时间，请耐心等待
- 如网络异常导致上传失败，可选择不带图片入库

---

## 出库操作

### 操作步骤

1. **进入出库页面**
   - 在首页点击「出库」按钮

2. **查看可出库物品列表**
   - 页面显示当前所有可出库的物品
   - 每个物品显示：物品类型、数量、单位、标签颜色

3. **选择出库物品**
   - 在物品卡片上**向左滑动**，露出「出库」按钮
   - 点击「出库」按钮

4. **输入出库数量**
   - 弹出数量输入框
   - 输入要出库的数量（必须为正整数）
   - 数量不能超过当前库存数量
   - 点击「确认出库」

5. **出库成功**
   - 显示「出库成功」提示
   - 物品列表自动刷新，显示最新库存

### 出库规则

- 系统采用 **FIFO（先进先出）** 原则
- 优先出库最早入库的物品
- 出库数量会从最早入库的记录中扣除

### 注意事项

- 出库数量不能超过当前库存
- 如果库存不足，系统会提示「库存不足，当前库存: X」
- 出库日期自动设置为当前日期

---

## 物品总览

### 功能说明

物品总览页面显示所有库存物品的详细信息，方便您快速了解库存情况。

### 查看内容

每个物品卡片显示：
- **物品名称**：物品类型
- **数量**：当前库存数量及单位
- **位置**：存放位置（如有）
- **标签颜色**：分类标签（如有）
- **入库日期**：物品入库时间
- **到期日期**：物品到期时间
- **照片**：如有照片，可点击「查看照片」预览
- **到期提醒**：临近到期的物品会显示「即将过期」红色标记

### 操作说明

1. **进入物品总览**
   - 在首页点击「物品总览」按钮

2. **查看物品详情**
   - 向下滑动查看所有物品
   - 点击「查看照片」可预览物品照片（全屏显示）

3. **刷新列表**
   - 下拉页面可刷新物品列表

### 视觉提示

- **正常物品**：白色背景
- **即将过期物品**：浅红色背景，左侧有红色边框，显示「即将过期」标记

---

## 统计功能

### 功能说明

统计页面提供出入库数据的统计和明细查询功能。

### 出入库统计

1. **设置时间范围**
   - 选择「开始日期」和「结束日期」
   - 系统自动查询该时间段内的出入库数据

2. **查看统计结果**
   - 表格显示每个物品的：
     - **物品**：物品类型
     - **入库**：入库数量
     - **出库**：出库数量
     - **净变化**：入库数量减去出库数量
       - 正数（绿色）：库存增加
       - 负数（红色）：库存减少

3. **查看明细**
   - 点击表格中的任意单元格（物品名称、入库数、出库数）
   - 页面下方显示该物品在该时间段内的详细出入库记录
   - 明细包括：操作类型（入库/出库）、日期、数量、单位、标签、位置等

4. **返回统计**
   - 在明细区域点击「返回」按钮，返回统计表格

### 库存明细

- 当未选择明细时，显示当前所有库存物品列表
- 每个物品显示：类型、数量、单位、标签、位置、入库日期、到期日期等

### 操作提示

- 下拉页面可刷新数据
- 点击统计表格可查看明细
- 明细按时间倒序排列（最新的在前）

---

## 我的页面

### 个人信息

显示您的：
- **姓名**：您的姓名（只读）
- **手机号**：您的手机号码（只读）

### 修改密码

1. **展开密码表单**
   - 点击「修改密码」项
   - 表单展开，显示密码输入框

2. **输入新密码**
   - 输入新密码
   - 再次输入确认密码
   - 两次密码必须一致

3. **保存密码**
   - 点击「保存密码」按钮
   - 显示「密码修改成功」提示

### 我的记录

#### 我的入库
- 查看您所有的入库记录
- 显示：物品类型、数量、单位、入库日期、到期日期、位置等
- 支持分页加载，向下滑动自动加载更多

#### 我的出库
- 查看您所有的出库记录
- 显示：物品类型、数量、单位、出库日期等
- 支持分页加载，向下滑动自动加载更多

### 其他设置

#### 退出登录
- 点击「退出登录」
- 确认后退出登录，返回登录页面

#### 管理用户（仅管理员）
- 仅 **admin** 或 **李丽君** 用户可见此选项
- 点击进入用户管理页面（详见下方「管理用户」章节）

---

## 管理用户（仅管理员）

> **权限说明**：只有用户名为 `admin` 或 `李丽君` 的用户才能访问此功能。

### 进入管理页面

1. 在「我的」页面
2. 找到「管理用户」选项（仅管理员可见）
3. 点击进入用户管理页面

### 新增用户

1. **点击「新增用户」按钮**
2. **填写用户信息**
   - **姓名**：输入用户姓名
   - **手机号**：输入11位手机号（格式：1开头，第二位3-9）
   - **状态**：选择用户状态
     - **正常**：用户可正常使用
     - **已注册**：用户已注册，可登录
     - **冻结**：用户被冻结，无法登录
     - **删除**：用户被删除

3. **保存**
   - 点击「保存」按钮
   - 显示「新增成功」提示

### 编辑用户

1. **选择用户**
   - 在用户列表中，点击要编辑的用户右侧「编辑」按钮

2. **修改信息**
   - 修改姓名、手机号或状态
   - 手机号格式必须正确
   - 手机号不能与其他用户重复

3. **保存**
   - 点击「保存」按钮
   - 显示「保存成功」提示

### 用户状态说明

- **正常**：用户账号正常，但未注册，无法登录
- **已注册**：用户已完成注册，可以登录使用系统
- **冻结**：用户账号被冻结，无法登录
- **删除**：用户账号被标记为删除

### 注意事项

- 手机号必须唯一，不能重复
- 手机号格式：1开头，第二位为3-9，共11位数字
- 修改用户状态会影响用户的登录权限

---

## 常见问题

### Q1: 登录时提示「未登录或登录已过期」

**原因**：Token 已过期（有效期1小时）或未登录

**解决方法**：
- 重新登录
- 确保网络连接正常

### Q2: 入库时照片上传失败

**原因**：网络异常或图片过大

**解决方法**：
- 检查网络连接
- 选择「不带图片入库」继续提交
- 或稍后重试

### Q3: 出库时提示「库存不足」

**原因**：当前库存数量小于要出库的数量

**解决方法**：
- 检查物品总览，确认当前库存
- 减少出库数量
- 或先进行入库操作

### Q4: 无法注册账号

**原因**：手机号未在系统中预初始化，或状态不是「正常」

**解决方法**：
- 联系管理员添加您的手机号
- 确认账号状态为「正常」

### Q5: 看不到「管理用户」选项

**原因**：您不是管理员

**解决方法**：
- 只有用户名为 `admin` 或 `李丽君` 的用户才能看到此选项
- 如需管理权限，请联系系统管理员

### Q6: 物品总览中看不到某些物品

**原因**：该物品可能已全部出库

**解决方法**：
- 检查统计页面，查看该物品的出入库记录
- 确认是否还有库存

### Q7: 统计页面没有数据

**原因**：选择的时间范围内没有出入库记录

**解决方法**：
- 调整时间范围
- 确认该时间段内确实有出入库操作

### Q8: 修改密码失败

**原因**：两次输入的密码不一致，或网络异常

**解决方法**：
- 确保两次密码输入一致
- 检查网络连接
- 重新尝试

---

## 技术支持

如遇到其他问题，请联系系统管理员或技术支持。

---

**最后更新**：2026年2月
